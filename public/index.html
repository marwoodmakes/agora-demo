<!DOCTYPE html>
<html lang="en">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>Voice Assistant Demo</title>
   <link
     rel="icon"
     type="image/png"
     href="https://cdn.shopify.com/s/files/1/0910/8389/9266/files/ChatGPT_Image_Jun_16_2025_09_51_46_AM.png?v=1750063921"
   />
   <link rel="stylesheet" href="style.css" />
 </head>

 <body>
   <!-- Slim header with inline logo and download icon -->
   <header class="header">
     <div class="header-content">
       <a href="https://agoraai.co.uk/" target="_blank" rel="noopener">
         <img
           src="https://cdn.shopify.com/s/files/1/0910/8389/9266/files/ChatGPT_Image_Jun_12_2025_01_05_41_PM.png?v=1749729963"
           alt="Agora AI Logo"
           class="logo"
         />
       </a>
       <button id="downloadBtn" class="icon-btn" title="Download Transcript">
         <img
           src="https://cdn.shopify.com/s/files/1/0910/8389/9266/files/Screenshot_2025-06-22_at_21.48.55.png?v=1750630141"
           alt="Download"
           class="download-icon"
         />
       </button>
     </div>
   </header>

   <hr class="divider" />

   <main class="chat-container">
     <h1>Voice Assistant Demo</h1>

     <div id="chat"></div>

     <audio id="audioPlayer" controls></audio>
   </main>

   <!-- Sticky Talk Button -->
   <button id="recordButton">Click to Talk</button>

   <script>
     document.getElementById("downloadBtn").addEventListener("click", function () {
       const chat = document.getElementById("chat");
       let text = "";

       chat.querySelectorAll(".chat-bubble").forEach((bubble) => {
         const isUser = bubble.classList.contains("user");
         const label = isUser ? "User: " : "Agent: ";
         const message = bubble.querySelector(".text")?.innerText || "";
         text += `${label}${message}\n\n`;
       });

       const blob = new Blob([text], { type: "text/plain" });
       const link = document.createElement("a");
       link.href = URL.createObjectURL(blob);
       link.download = "transcript.txt";
       document.body.appendChild(link);
       link.click();
       document.body.removeChild(link);
     });
   </script>

   <script src="script.js"></script>
 </body>
</html>
